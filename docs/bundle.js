!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=14)}({0:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},14:function(t,e,n){"use strict";n.r(e);var r=n(2),i=n.n(r),a={android:function(){return navigator.userAgent.match(/Android/i)},blackberry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return a.android()||a.blackberry()||a.ios()||a.opera()||a.windows()}},o=a,s=n(3),l=n.n(s),c=1,u=!1,d=null,f=null,p=null,h=null,m=65,y=null,v=0,g={top:0,right:0,bottom:0,left:0},b=550-g.left-g.right,w=600-g.top-g.bottom;function x(t,e){return[(e=function(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3]]}(t,[e[0],e[1],0,1]))[0]/e[3],e[1]/e[3]]}d3.select(".chart").style("width",b+"px").style("height",w+"px");var k={init:function(){!function(){var t,e,n,r,i,a,o,s,k=d3.select(".cumulative-container"),S={},A=9,E=(new Date(Date.now()-1500),2500),N=0,C=1995,M=!1,O=!1,P=!1,T=d3.time.format("%Y-%m-%d").parse,F=d3.time.format("%Y-%m-%d"),D=d3.time.format("%b, '%y"),U=d3.time.format("%B %d, '%y"),L=(d3.time.format("%b %d, '%y"),d3.time.format("%Y%m%d")),j=d3.time.format("%Y%m%d").parse,V=d3.time.format("%b '%y"),z=d3.time.format("%Y"),B="assets/data/unique_rows.csv",H="1964-03-14";/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(P=!0,v=-25,B="assets/data/unique_rows_mobile.csv");var R,I,Y,q,G,X=new Date(T(H)),W=[X];for(R=0;R<A;R++){var J=W.length,K=d3.time.day.offset(W[J-1],7);W.push(K)}function Q(t,e,n,r,i,a){this.context=t,this.urlList=e,this.onload=n,this.bufferList=new Array,this.loadCount=0,this.startingTime=i,this.playingLength=r,this.thing=a}function Z(t,e,n,i){if("https://p.scdn.co/mp3-preview/NULL"==t)console.log("null song");else{var a=new Q(r,[t],tt,e,n,i);a.load()}}function tt(t,e,n,i){!function(t,e,n,i){r.currentTime,o=a;var s=et(t);(a=s.source).loop=!0;var l=s.gainNode,c=e/1e3+2;l.gain.linearRampToValueAtTime(0,n),l.gain.linearRampToValueAtTime(1,n+2),a.start||(a.start=a.noteOn),a.start(r.currentTime+(n-r.currentTime)),l.gain.linearRampToValueAtTime(1,n+c-2),l.gain.linearRampToValueAtTime(0,n+c)}(t[0],e,n)}function et(t){var e=r.createBufferSource(),n=r.createGain?r.createGain():r.createGainNode();return e.buffer=t,e.connect(n),n.connect(r.destination),{source:e,gainNode:n}}F(d3.time.day.offset(W[0],7)),F(d3.time.day.offset(W[0],14)),F(W[0]),I=Math.max(document.documentElement.clientWidth,window.innerWidth||0),Y=Math.max(document.documentElement.clientHeight,window.innerHeight||0),$(document).ready(function(){d3.csv("assets/data/all_rows.csv",function(R,q){d3.csv(B,function(B,R){/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(b=250,I<400&&(b=227),I<330&&(b=195,w=Y-230),g.left=25);var G=d3.nest().key(function(t){return t.artist}).entries(R.sort(function(t,e){var n=e.title,r=t.title;return n>r?-1:n<r?1:0})),$=d3.map(R,function(t){return t.key}),J=d3.time.scale().domain([W[0],W[W.length-1]]).range([w,0]),K=d3.scale.linear().domain([6,1]).range([b,0]),Q=d3.svg.axis().scale(J).ticks(3).tickFormat(d3.time.format("%b %d '%y")).innerTickSize(0).outerTickSize(0).tickPadding(0).orient("bottom");/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&Q.tickFormat(d3.time.format("%b-%Y")).ticks(2);var tt=d3.svg.axis().scale(K).tickFormat(function(t,e){return 1==t?"#"+t:t}).innerTickSize(-10).tickValues([1,2,3,4,5]).tickPadding(3).orient("left"),nt=d3.svg.line().interpolate("linear").x(function(t,e){return K(+t.rank)}).y(function(t,e){return J(t.chart_date)});q.forEach(function(t){+t.chart_date.slice(0,4)<1962&&"1961-12-30"!=t.chart_date?(t.chart_date=d3.time.day.offset(T(t.chart_date),-2),t.chart_date_num=F(t.chart_date)):(t.chart_date_num=t.chart_date,t.chart_date=T(t.chart_date)),t.id=t.track_id,$.has(t.id),t.track_info=$.get(t.id)}),d3.nest().key(function(t){return t.id}).entries(q);var rt=d3.nest().key(function(t){return t.chart_date_num.slice(0,7)}).entries(q.filter(function(t){return+t.rank<6}));e=d3.nest().key(function(t){return t.id}).entries(q);for(var it=d3.nest().key(function(t){return t.chart_date_num}).entries(q),at=it.map(function(t){return+t.key.replace("-","").replace("-","")}).filter(function(t,e){return e%5==0}),ot=0;ot<e.length;ot++){for(var st={},lt=0;lt<e[ot].values.length;lt++){var ct=e[ot].values[lt].chart_date_num,ut=e[ot].values[lt].rank;ut<6&&(st[ct]=ut)}e[ot].nestedDateArray=st}var dt=d3.map(e,function(t){return t.key});for(var ct in rt)for(var ft in rt[ct].values){var pt=dt.get(rt[ct].values[ft].id);rt[ct].values[ft].nestedDateArray=pt.nestedDateArray,rt[ct].values[ft].key=pt.key,rt[ct].values[ft].values=pt.values.filter(function(t){return+t.rank<6})}var ht=(rt=d3.map(rt,function(t){return t.key})).get(F(W[0]).slice(0,7)).values,mt=(F(d3.time.month.offset(W[0],1)).slice(0,7),rt.get(F(d3.time.month.offset(W[0],1)).slice(0,7)).values);ht=_.unionBy(ht,mt);var yt={};for(var ot in it)it[ot].values.sort(function(t,e){return t.rank-e.rank});for(var ot in it){var ct=it[ot].key;yt[ct]={track:it[ot].values[0].id,preview:it[ot].values[0].track_info.song_url,artist:it[ot].values[0].track_info.artist,title:it[ot].values[0].track_info.title}}var vt=d3.map(it,function(t){return t.key});function gt(t){console.log("changing year");var e=rt.get(F(W[0]).slice(0,7)).values,n=rt.get(F(d3.time.month.offset(W[0],1)).slice(0,7)).values,r=rt.get(F(d3.time.month.offset(W[0],2)).slice(0,7)).values,i=rt.get(F(d3.time.month.offset(W[0],2)).slice(0,7)).values;ht=_.unionBy(e,n,r,i,"key"),d3.selectAll("#glow").remove(),Et=Et.data(ht,function(t){return t.key}),y=y.data(W,function(t){return t}),h=h.data(ht,function(t){return t.key}),Et.enter().append("path").attr("class","line").attr("d",function(t){return nt(t.values)}).attr("transform","translate("+J(W[W.length-1])+")").style("stroke",function(t){var e=t;return Bt(e)}).style("opacity",function(t){return Ht(t)}),y.enter().append("div").attr("class","date-line").style("top",function(t){return J(t)+"px"}).style("display",function(t){var e=+F(t).replace("-","").replace("-","");return at.indexOf(e)>-1?"block":null}).append("p").text(function(t){return D(t)}),h.enter().append("div").attr("class","face tk-futura-pt").style("background-image",function(t){if("NULL"==t.track_info.artist_url)return null;if("manual"==t.track_info.artist_url){var e=document.location.origin,n=document.location.pathname.replace("index.html",""),r=yt[F(d3.time.day.offset(W[W.length-1],7))].track;return nextSong=e+n+"url/"+r+".m4a","url("+nextSong+")"}return"url(https://i.scdn.co/image/"+t.track_info.artist_url+")"}).style("top",function(t){return Tt(t)}).style("left",function(t){var e=t;return Ft(e)}).append("p").append("span").text(function(t){return t.track_info.title}),Et.exit().remove(),h.exit().remove(),y.exit().remove()}var bt=F(W[0]),wt=F(d3.time.day.offset(W[0],7));F(d3.time.day.offset(W[0],14)),d3.scale.linear().domain([20,4,1]).range([.05,.3,1]),d3.scale.linear().domain([0,354]).range([23,375]),d=d3.select(".chart").append("svg").attr("width",b+g.left+g.right).attr("height",w+g.top+g.bottom).style("width",b+g.left+g.right+"px").style("height",w+g.top+g.bottom+"px").attr("class","lines-container");var xt=d3.schemeYlGnBu[5];xt=["#49217a","#852c82","#b52f59","#f5af71","#fcfbbc"].reverse(),d.append("linearGradient").attr("id","temperature-gradient").attr("gradientUnits","userSpaceOnUse").attr("x1",K(5)).attr("y1",0).attr("x2",K(1)).attr("y2",0).selectAll("stop").data(xt.reverse().map(function(t,e){return{offset:25*e+"%",color:t}})).enter().append("stop").attr("offset",function(t){return t.offset}).attr("stop-color",function(t){return t.color}),d.append("defs").html('<filter id="outline"> <feMorphology in="SourceAlpha" result="DILATED" operator="dilate" radius="3"></feMorphology> <feFlood flood-color="#111" flood-opacity="1" result="PINK"></feFlood> <feComposite in="PINK" in2="DILATED" operator="in" result="OUTLINE"></feComposite> <feMerge> <feMergeNode in="OUTLINE"></feMergeNode> <feMergeNode in="SourceGraphic"></feMergeNode> </feMerge> </filter>'),d.append("defs").append("clipPath").attr("id","clip").append("rect").attr("x",-10).attr("y",-500).attr("width",b).attr("height",500+w-70),d.append("defs").append("clipPath").attr("id","xaxisclip").append("rect").attr("width",b+20).attr("height",w+2*g.bottom+g.top),d.append("defs").append("filter").attr("id","blurred").append("feGaussianBlur").attr("stdDeviation",8),d.append("defs").append("filter").attr("id","blurredTwo").append("feGaussianBlur").attr("stdDeviation",2);var kt=d.append("g").attr("transform",function(){var t=g.left+20;return P&&(t=75),"translate("+t+","+g.top+")"}).attr("class","y axis tk-futura-pt").call(tt),St=d.append("g").append("g").attr("class","x-axis-container"),At=d.append("g").attr("transform","translate("+g.left+","+g.top+")").attr("clip-path","url(#clip)").attr("class","path-container");d3.svg.line().interpolate(function(t){for(var e in t)t[e]=x(matrix,t[e]);return t.join("L")}).x(function(t,e){return K(+t.rank)}).y(function(t,e){return J(t.chart_date)});var Et=At.selectAll("path").data(ht,function(t){return t.key}).enter().append("path").attr("class","line").attr("d",function(t){return nt(t.values)}).style("stroke",function(t){return Bt(t)}).style("opacity",function(t){return 1}).on("mouseover",function(t){console.log(t)});function Nt(t){var e=t.node();return d3.select(e.parentNode.insertBefore(e.cloneNode(!0),e))}Et.each(function(t,e){if(wt in t.nestedDateArray){var n=t.nestedDateArray[wt];1==n&&Nt(d3.select(this)).attr("filter","url(#blurred)").style("stroke-width","9px").style("stroke","#c000ff").style("opacity",.8).attr("id","glow")}});var Ct=d3.select(".bottom-frame").style("width",b+"px").style("height",w+"px");Ct.select(".ranking").selectAll("p").style("color",function(t,e){return xt[xt.length-e-1]});var Mt=d3.select(".guitar-frame").style("width",b+"px").style("height",w+"px").append("svg");Mt.append("rect").attr("x","0").attr("y",w-30-1).attr("height",30).attr("width","100%"),Mt.selectAll("line").data(d3.range(6)).enter().append("line").attr("x1",function(t,e){return 0==e?1:5==e?"100%":20*e+"%"}).attr("x2",function(t,e){return 0==e?1:5==e?"100%":20*e+"%"}).attr("y1",function(t){return-400}).attr("y2",function(t){return w-30-1}),p=d3.select(".chart").append("div").attr("id","faces"),f=p.append("div").attr("class","face-fixed-container").selectAll(".face-fixed").data(d3.range(5)).enter().append("div").attr("class","face-fixed face").style("left",function(t,e){return K(e+1)+v+g.top+"px"}).style("top",function(t){return J(W[1])+"px"}).style("background-image",function(t,e){var n=vt.get(wt).values[e];return Dt(n)}),(h=p.append("div").attr("class","face-container").selectAll(".face").data(ht,function(t){return t.key}).enter().append("div").attr("class","face tk-futura-pt").style("background-image",function(t){var e=t;return Dt(e)}).style("opacity",function(t){var e=t;return Ut(e)}).style("top",function(t){return Tt(t)}).style("left",function(t){var e=t;return Ft(e)}).style("width",m+"px").style("height",m+"px").on("mouseover",function(t){var e=t;d3.select(this),function(t,e){var n=t.track_info.artist,r=t.track_info.title;/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||d3.select(".number-one-artist").style("color","#FFF").text(r+"â€”"+n)}(e)})).append("p").append("span").text(function(t){return t.track_info.title}),(y=p.append("div").attr("class","date-lines-container").selectAll("div").data(W).enter().append("div").attr("class","date-line").style("top",function(t){return J(t)+"px"}).style("display",function(t){var e=+F(t).replace("-","").replace("-","");return at.indexOf(e)>-1?"block":null})).append("p").text(function(t){return D(t)}),d3.select(".chart").on("mouseover",function(){M||jt.style("opacity",1)}).on("mouseout",function(){M||jt.style("opacity",0)});var Ot=240;P&&(Ot=230),d3.select(".chart").append("svg").attr("class","text-container").append("g").attr("clip-path","url(#clip)").attr("transform",function(){var t=g.top;return"translate("+Ot+","+t+")"});var _t=d3.select(".click-to-play"),Pt=d3.select(".track-legend").selectAll("div");function Tt(t){if(wt in t.nestedDateArray||bt in t.nestedDateArray)return J(W[1])+"px";if(F(d3.time.day.offset(W[0],-7))in t.nestedDateArray||F(d3.time.day.offset(W[0],-14))in t.nestedDateArray)return J(W[0])+"px";var e=t.values[t.values.length-1].chart_date;return J(e)+"px"}function Ft(t){if(wt in t.nestedDateArray){var e=t.nestedDateArray[wt];return K(e)+v+g.top+"px"}if(F(d3.time.day.offset(W[0],-7))in t.nestedDateArray){var e=t.nestedDateArray[bt];return K(e)+v+g.top+"px"}var e=t.values[t.values.length-1].rank;return K(e)+v+g.top+"px"}function Dt(t){return"NULL"==t.track_info.artist_url?null:"url(https://i.scdn.co/image/"+t.track_info.artist_url+")"}function Ut(t){return wt in t.nestedDateArray||bt in t.nestedDateArray?null:W[0]>d3.max(t.values,function(t){return t.chart_date})?0:.5}d3.interpolate("#0C0C0C","#FFFFFF"),d3.select(".bio-name"),d3.select(".bio-info");var Lt,jt=d3.selectAll(".paused-play-button").on("click",function(){d3.select(this).style("pointer-events","none"),d3.select(".pause-section").style("display","initial"),returnPath()}),Vt=d3.select(".search-results-new");function zt(t){a&&(a.stop||(a.stop=a.noteOff),a.stop(0)),o&&(o.stop||(o.stop=o.noteOff),o.stop(0)),1==M&&(Rt=Rt.transition(0).duration(0)),M=!0;var e,i=new Date(+t),s=L(i),l=at.reduce(function(t,e){return Math.abs(e-s)<Math.abs(t-s)?e:t});for(W=[j(JSON.stringify(l))],e=0;e<A;e++){var c=W.length,u=d3.time.day.offset(W[c-1],7);W.push(u)}F(d3.time.day.offset(W[0],7)),F(d3.time.day.offset(W[0],14)),F(W[0]),J.domain([W[0],W[W.length-1]]),window.clearTimeout(n),n=setTimeout(function(){if(0==O){for(e=2;e<20;e++){var t=d3.time.day.offset(W[0],7),n=d3.time.day.offset(W[0],7*e);if(yt[F(t)].track!=yt[F(n)].track){N=Math.max((e-1)*E,E);break}}var i,a=r.currentTime,o=yt[F(d3.time.day.offset(W[W.length-1],7))].preview;if(i="https://p.scdn.co/mp3-preview/"+o,"manual"==o){var s=document.location.origin,l=document.location.pathname.replace("index.html",""),c=yt[F(d3.time.day.offset(W[W.length-1],7))].track;i=s+l+"url/"+c+".m4a"}Z(i,N,a+1,"now")}Rt=d3.select({}).transition().duration(E).ease("linear"),Kt()},100)}function Bt(t){return wt in t.nestedDateArray?(t.nestedDateArray[wt],"url(#temperature-gradient)"):"#fff"}function Ht(t){if(wt in t.nestedDateArray){var e=t.nestedDateArray[wt];return 1==e?1:2==e?.8:.6}return.1}d3.select(".search-input").on("keyup",function(){!function(t,e){if(t.length>2){d3.select(".cumulative-stats").style("display","none"),Vt.style("display","block");var n=new RegExp("\\b"+d3.requote(t),"i"),r=_.filter(e,function(t,e){return n.test(t.key)});for(artist in d3.selectAll(".search-result-wrapper").remove(),r)for(ft in r[artist].values){var i=dt.get(r[artist].values[ft].key).nestedDateArray,a=Object.keys(i),o=a[0];for(pt in a)o>a[pt]&&i[a[pt]]<6&&(o=a[pt]);r[artist].values[ft].min_date=T(o)}var e=Vt.selectAll("p").data(r,function(t){return t.key}),s=e.enter().append("div").attr("class","tk-futura-pt search-result-wrapper");s.append("p").attr("class","tk-futura-pt search-result-artist").text(function(t){return t.key});var l=s.append("div").attr("class","tk-futura-pt search-result-tracks-container"),c=l.selectAll("div").data(function(t,e){return t.values}).enter().append("div").sort(function(t,e){return t.min_date-e.min_date}).attr("class","tk-futura-pt search-result-track-wrapper");c.append("p").attr("class","tk-futura-pt search-result-track-text").text(function(t,e){return t.title.length>20?t.title.slice(0,18)+"...":t.title}),c.append("p").attr("class","tk-futura-pt search-result-track-date").text(function(t){return V(t.min_date)}).on("click",function(t){var e=F(d3.time.day.offset(t.min_date,-21));zt(e)}),e.exit().remove()}else d3.select(".cumulative-stats").style("display","block"),Vt.style("display","none")}(this.value.trim(),G)}),console.log(rt),d3.select(".paused-play-button-two").on("click",function(){d3.select("body").style("height","auto").style("overflow","auto"),d3.select(".screen").transition().duration(500).style("opacity",0).transition().duration(500).delay(500).style("display","none"),d3.select(".content").style("opacity",1),setTimeout(function(){ce()},200),d3.select(".paused-play-button-two").style("pointer-events","none")}),d3.select(".number-one").transition().duration(5e3).text(function(t){var e=U(W[W.length-1]);return e}),d3.select(".number-one-artist").style("color",null).text(function(t){return yt[bt].title+"â€”"+yt[bt].artist}),t=St.append("g").attr("class","x axis tk-futura-pt").attr("transform",function(){var t=w+60;return"translate(0,"+t+")"}).call(Q);var Rt=d3.select({}).transition().duration(E).ease("linear"),It=(Object.keys(S).map(function(t){return{artist:t,count:S[t]}}),d3.extent(it,function(t){return T(t.key)})),Yt=[],qt=["1960-01","1970-01","1980-01","1990-01","2000-01","2010-01"];for(var ct in qt){var Gt=rt.get(qt[ct]),Xt=Gt.values[Gt.values.length-1].chart_date.getTime();Yt.push(Xt)}var Wt=l.a.create(d3.select("#slider").node(),{start:[X.getTime()],step:6048e5,range:{min:It[0].getTime(),max:It[1].getTime()},format:{to:function(t){return D(new Date(+t))},from:Number},connect:[!0,!1],tooltips:[!0],pips:{mode:"values",values:Yt,density:4,stepped:!0,format:{to:function(t){return z(new Date(+t))},from:Number}}});Wt.on("start",function(t,e){u=!0}),Wt.on("change",function(t,e,n,r,i){console.log(t,e,n,r,i),zt(n)}),Wt.on("end",function(t,e){u=!1});var $t=!0;function Jt(){var t=this.getAttribute("data-value");Wt.set(Number(t)),zt(Number(t))}function Kt(){var e,n=r.currentTime;for(var i in W)W[i]=d3.time.day.offset(W[i],7);if(yt[F(W[0])].track!=yt[F(d3.time.day.offset(W[0],7))].track&&0==O){for(i=2;i<20;i++){var a=d3.time.day.offset(W[0],7),o=d3.time.day.offset(W[0],7*i);if(yt[F(a)].track!=yt[F(o)].track){N=(i-1)*E;break}}var s=yt[F(d3.time.day.offset(W[0],7))].preview;if(e="https://p.scdn.co/mp3-preview/"+s,"manual"==s){var l=document.location.origin,d=document.location.pathname.replace("index.html",""),p=yt[F(d3.time.day.offset(W[0],7))].track;e=l+d+"url/"+p+".m4a"}Z(e,N,n+E/1e3,"scheduled")}bt=F(W[0]),wt=F(d3.time.day.offset(W[0],7)),F(d3.time.day.offset(W[0],14)),gt(C);var v=[W[0]];for(i=0;i<8;i++){var g=v.length,b=d3.time.day.offset(v[g-1],1);v.push(b)}u||(console.log(u),Wt.set(Number(W[0].getTime()))),Rt=Rt.each(function(){var e=E/7;if(d3.select(".year-drop-down-text").text(bt.slice(0,4)),d3.select("#top-date-sub").transition().duration(e).text(function(t){return U(v[0])}).transition().duration(e).text(function(t){return U(v[1])}).transition().duration(e).text(function(t){return U(v[2])}).transition().duration(e).text(function(t){return U(v[3])}).transition().duration(e).text(function(t){return U(v[4])}).transition().duration(e).text(function(t){return U(v[5])}).transition().duration(e).text(function(t){return U(v[6])}).transition().duration(e).text(function(t){return U(v[7])}),!P){var n=yt[bt].artist.split(" Feat")[0];S[n]=n in S?S[n]+1:1;var r=Object.keys(S).map(function(t){return{artist:t,count:S[t]}}).sort(function(t,e){return e.count-t.count}).filter(function(t,e){return e<10});(k=d3.select(".cumulative-container").selectAll("p").data(r,function(t){return t.artist})).enter().append("p").attr("class","cumlative-artist"),d3.selectAll(".cumlative-artist").sort(function(t,e){return e.count-t.count}).text(function(t){return t.artist+": "+t.count}),k.exit().remove()}d3.select("#top-title-sub").text(yt[F(W[0])].title),yt[F(W[0])].track!=yt[F(W[1])].track?(c=1,d3.select(".streak").style("opacity",0)):((c+=1)>2&&d3.select(".streak").style("opacity",1),d3.select(".streak").select(".big").text(c).style("font-size","70px"),window.setTimeout(function(){d3.select(".streak").select(".big").style("font-size",null)},100)),J.domain([W[0],W[W.length-1]]),f.style("background-image",function(t,e){var n=vt.get(bt).values[e];return Dt(n)}).style("top",function(t){return J(W[1])+"px"}),h.select("p").style("color",function(t){if(wt in t.nestedDateArray){var e=t.nestedDateArray[wt];if(1==e)return"#fff"}return null}).style("font-size",function(t){if(wt in t.nestedDateArray){var e=t.nestedDateArray[wt];if(1==e)return"18px"}return null}),h.style("opacity",function(t){return Ut(t)}).style("width",m+"px").style("height",m+"px").transition().style("top",function(t){return Tt(t)}).style("left",function(t){var e=t;return Ft(e)}),y.style("top",function(t){return J(t)+"px"}).transition().style("opacity",function(t,e){if(0==e)return 0}),d3.select(".date-lines-container").style("transform","translate(0px,"+J(d3.time.day.offset(W[W.length-1],7))+"px)").transition().styleTween("transform",function(t){return d3.interpolateString("translate(0px,"+J(d3.time.day.offset(W[W.length-1],7))+"px)","translate(0px,0px)")}),Et.attr("d",function(t){return nt(t.values)}).style("stroke",function(t){var e=t;return Bt(e)}).style("opacity",function(t){var e=t;return Ht(e)}).style("stroke-width",function(t){var e=t;return function(t){if(wt in t.nestedDateArray){var e=t.nestedDateArray[wt];return 1==e?null:"2px"}return"1px"}(e)}).each(function(t,e){if(wt in t.nestedDateArray){var n=t.nestedDateArray[wt];1==n?Nt(d3.select(this)).attr("filter","url(#blurred)").style("stroke",xt[0]).attr("id","glow").style("stroke-width","10px").style("opacity",1):Nt(d3.select(this)).style("stroke","rgb(17,17,17)").attr("id","glow").style("stroke-width","6px")}}),d3.select(".path-container").selectAll("path").attr("transform","translate(0,"+J(d3.time.day.offset(W[W.length-1],7))+")"),d3.select(".path-container").selectAll("path").transition().attr("transform","translate(0,0)"),t.call(Q)}).transition().each("start",function(){this.__transition__.count<2&&Kt()})}d3.select(".play-pause").on("click",function(){$t?($t=!1,d3.select(".play-pause").select(".play-button").style("display","none"),d3.select(".play-pause").select(".pause-button").style("display","block")):($t=!0,d3.select(".play-pause").select(".play-button").style("display",null),d3.select(".play-pause").select(".pause-button").style("display",null))}),d3.select("#slider").selectAll(".noUi-value").each(function(t){d3.select(this).node().addEventListener("click",Jt)}),function(){function t(t){var e="visible",n="hidden",r={focus:e,focusin:e,pageshow:e,blur:n,focusout:n,pagehide:n};(t=t||window.event).type in r||(1==this[s]?M&&ue():M&&ce())}(s="hidden")in document?document.addEventListener("visibilitychange",t):(s="mozHidden")in document?document.addEventListener("mozvisibilitychange",t):(s="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",t):(s="msHidden")in document?document.addEventListener("msvisibilitychange",t):"onfocusin"in document?document.onfocusin=document.onfocusout=t:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=t,void 0!==document[s]&&t({type:document[s]?"blur":"focus"})}(),d3.select(".change-year-wide");var Qt=d3.select(".change-year-wide-data"),Zt=d3.selectAll(".text-section");d3.scale.linear().domain([it.length,0]).range([0,530]),Zt.on("click",function(e,n){var r;d3.select(".bio-info").transition().duration(300).style("opacity",1),0==n?r=1343:1==n?r=1154:2==n?r=1099:3==n?r=1045:4==n?r=1040:5==n&&(r=924),M?zt(it[r].key):M||(Pt.style("visibility","hidden"),h.style("visibility","visible"),text.style("visibility","visible"),_t.style("visibility","visible"),K.domain([10,1]),J.domain([W[2],W[W.length-1]]),tt.scale(K).tickFormat(function(t,e){return 1==t?"#"+t:t}).innerTickSize(-b).tickValues(K.ticks(10).concat(K.domain())).tickPadding(5).orient("left"),Q.ticks(5).tickFormat(d3.time.format("%b-%d %Y")),/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&Q.tickFormat(d3.time.format("%b-%Y")).ticks(2),kt.call(tt),t.transition().duration(100).call(Q),jt.style("pointer-events","none"),zt(it[r].key))});var te=d3.nest().key(function(t){return t.key.slice(0,3)}).key(function(t){return t.key.slice(0,4)}).sortKeys(function(t,e){return+t-+e}).key(function(t){return t.key.slice(5,7)}).sortKeys(function(t,e){return+t-+e}).entries(it.slice(10,3015));function ee(t){var e=t.values.length;return P?null:t.key==H.slice(0,3)?"236px":e>4?e>8?"114px":"78px":null}function ne(t){if(P)return null;var e=t.values.length;return e>4?e>8?"208px":"192px":"146px"}var re=Qt.selectAll("div").data(te).enter().append("div").attr("class","chart-year-wide-data-decade-container").style("width",function(t,e){var n=t;return ee(n)}).on("touchstart",function(t,e){if(P){var n=d3.select(this);re.select("div").style("pointer-events","none").selectAll(".chart-year-wide-data-year").style("opacity",null),n.select("div").style("visibility","visible").style("pointer-events","all").selectAll(".chart-year-wide-data-year").style("opacity",1)}}).on("mouseover",function(t,e){if(!P){var n=d3.select(this),r=re.filter(function(t,e){return t.key!=H.slice(0,3)});r.selectAll(".chart-year-wide-data-year").style("opacity",null),n.select("div").selectAll(".chart-year-wide-data-year").style("opacity",1)}}).on("mouseout",function(t){if(!P){var e=re.filter(function(t,e){return t.key!=H.slice(0,3)});e.selectAll(".chart-year-wide-data-year").style("opacity",null)}});re.append("p").attr("class","chart-year-wide-data-decade-text").text(function(t){return t.key+"0s"});var ie=re.append("div").attr("class","chart-year-wide-data-year-wrapper").selectAll(".chart-year-wide-data-year-container").data(function(t,e){return t.values}).enter().append("div").attr("class","chart-year-wide-data-year-container"),ae={"01":"JAN","02":"FEB","03":"MAR","04":"APR","05":"MAY","06":"JUN","07":"JUL","08":"AUG","09":"SEP",10:"OCT",11:"NOV",12:"DEC"};ie.append("p").attr("class","chart-year-wide-data-year").text(function(t,e){return t.key}).on("click",function(t,e){H=t.values[0].values[0].key,d3.select(".play-button-new").style("pointer-events","none").style("color",null),d3.select(".pause-button-new").style("pointer-events","all").style("color","white"),zt(H);var n=re.filter(function(t,e){return t.key!=H.slice(0,3)});n.select("p").style("color",null),n.select("div").selectAll("div").select("p").style("opacity",null).style("color",null),n.select("div").selectAll("div").select("div").style("visibility","hidden"),n.style("width",function(t,e){var n=t;return ee(n)});var r=d3.select(this.parentNode.parentNode.parentNode);r.select("p").style("color","#FF2F28"),r.select("div").selectAll("div").select("div").style("visibility","hidden"),r.select("div").selectAll("div").select("p").style("color",null).style("opacity",1),r.style("width",function(t,e){var n=t;return ne(n)});var i=d3.select(this.parentNode);i.select("p").style("color","#FF2F28"),i.select("div").style("visibility","visible").selectAll("p").style("color",function(t,e){return 0==e?"#FF2F28":null}).style("opacity",0).transition().duration(300).delay(function(t,e){return 70*e}).style("opacity",1)});var oe=ie.append("div").attr("class","chart-year-wide-data-month-container").style("left",function(t,e){var n=d3.select(this.parentNode.parentNode).datum().values.length;return n>8?"122px":n<5?"48px":null});oe.selectAll("p").data(function(t,e){return t.values}).enter().append("p").attr("class","chart-year-wide-data-month").text(function(t,e){return ae[t.key]}).on("click",function(t,e){d3.select(this.parentNode).selectAll("p").style("color",null),d3.select(this).style("color","#FF2F28"),H=t.values[0].key,d3.select(".play-button-new").style("pointer-events","none").style("color",null),d3.select(".pause-button-new").style("pointer-events","all").style("color","white"),H.length<5&&(H=t.values[0].values[0].key),zt(H)});var se=re.filter(function(t,e){return t.key==H.slice(0,3)}).style("width",function(t,e){var n=t;return ne(n)});se.select("p").style("color","#FF2F28"),se.select("div").style("visibility","visible").style("pointer-events","all"),se.selectAll(".chart-year-wide-data-year-container").select("p").style("opacity",1);var le=se.selectAll(".chart-year-wide-data-year-container").filter(function(t,e){return t.key==H.slice(0,4)});function ce(){clearInterval(Lt),d3.select(".number-one-date-wrapper").style("opacity",1);var t=et(i),e=t.source;e.start||(e.start=a.noteOn),e.start(0),M=!0,n=setTimeout(function(){if(0==O){for(ot=2;ot<20;ot++){var t=d3.time.day.offset(W[W.length-1],7),e=d3.time.day.offset(W[W.length-1],7*ot);if(yt[F(t)].track!=yt[F(e)].track){N=Math.max((ot-1)*E,E);break}}var n,i=r.currentTime,a=yt[F(d3.time.day.offset(W[W.length-1],7))].preview;if(n="https://p.scdn.co/mp3-preview/"+a,"manual"==a){var o=document.location.origin,s=document.location.pathname.replace("index.html",""),l=yt[F(d3.time.day.offset(W[W.length-1],7))].track;n=o+s+"url/"+l+".m4a"}Z(n,N,i+1,"now")}Rt=d3.select({}).transition().duration(E).ease("linear"),Kt()},100)}function ue(){Rt=Rt.transition(0).duration(0),t.transition().duration(0),h.transition().duration(0),Et.transition().duration(0),d3.selectAll(".number-one").transition().duration(0),a&&1==M&&(a.stop||(a.stop=a.noteOff),a.stop(0)),o&&1==M&&(o.stop||(o.stop=o.noteOff),o.stop(0))}le.select("p").style("color","#FF2F28"),le.select("div").style("visibility","visible").selectAll(".chart-year-wide-data-month").filter(function(t){return t.key==H.slice(5,7)}).style("color","#FF2F28"),d3.select(".pause-button-new").on("click",function(){M&&(d3.select(this).style("pointer-events","none").style("color",null),d3.select(".play-button-new").style("pointer-events","all").style("color","white"),M=!1,a&&(a.stop||(a.stop=a.noteOff),a.stop(0)),o&&(o.stop||(o.stop=o.noteOff),o.stop(0)),ue())}),d3.select(".play-button-new").on("click",function(){M||(d3.select(this).style("pointer-events","none").style("color",null),d3.select(".pause-button-new").style("pointer-events","all").style("color","white"),M=!0,ce())})})}),function(){Math.floor(Y/50);var t=Math.floor(I/50),e=d3.range(0,50*t,50),n=e.slice(0,Math.floor(.33*t)),r=e.slice(Math.floor(.66*t),e.length-1),i=d3.scale.quantize().domain([0,1]).range(n.concat(r));d3.select(".opening-one").text("How Music"),P?(d3.selectAll(".opening-two").style("opacity",1),d3.select(".opening-one").text("How Music"),d3.selectAll(".description-section").style("opacity",1),d3.selectAll(".button-border").style("width","100%"),d3.selectAll(".text-load").style("opacity",1),d3.selectAll(".button-symbol").style("opacity",1)):(setTimeout(function(){d3.selectAll(".images-screen").selectAll(".img-screen").style("top",function(t,e){var n=50*e;return n+"px"}).style("left",function(t,e){var n=i(Math.random());return n+"px"}).transition().duration(1500).delay(function(t,e){return 350*e}).ease("linear").style("opacity",.2).style("left",function(t,e){var n=d3.select(this).style("left").replace("px","");if(n<I/2){var r=+n+25;return r+"px"}return n+"px"})},100),setTimeout(function(){d3.selectAll(".opening-two").transition().duration(500).ease("cubic").style("opacity",1),d3.select(".opening-one").transition().duration(500).ease("cubic").style("margin-top","0px").style("opacity",1),d3.selectAll(".description-section").transition().duration(500).delay(400).ease("cubic").style("opacity",1),d3.selectAll(".button-border").transition().duration(800).delay(1e3).ease("exp").style("width","100%"),d3.selectAll(".text-load").transition().duration(800).delay(1100).ease("exp").style("opacity",1)},1600))}()}),Q.prototype.loadBuffer=function(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer";var r=this;n.onload=function(){r.context.decodeAudioData(n.response,function(n){n?(r.bufferList[e]=n,++r.loadCount==r.urlList.length&&r.onload(r.bufferList,r.playingLength,r.startingTime,r.thing)):alert("error decoding file data: "+t)},function(t){console.error("decodeAudioData error",t)})},n.onerror=function(){alert("BufferLoader: XHR error")},n.send()},Q.prototype.load=function(){for(var t=0;t<this.urlList.length;++t)this.loadBuffer(this.urlList[t],t)},window.AudioContext=window.AudioContext||window.webkitAudioContext,r=new AudioContext,q="url/i_wish.mp3",(G=new XMLHttpRequest).open("GET",q,!0),G.responseType="arraybuffer",G.onload=function(){r.decodeAudioData(G.response,function(t){i=t})},G.send()}()},resize:function(){}};var S=d3.select("body"),A=0;function E(){var t=S.node().offsetWidth;A!==t&&(A=t,k.resize())}S.classed("is-mobile",o.any()),window.addEventListener("resize",i()(E,150)),k.init()},2:function(t,e,n){(function(e){var n="Expected a function",r=NaN,i="[object Symbol]",a=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,u="object"==typeof e&&e&&e.Object===Object&&e,d="object"==typeof self&&self&&self.Object===Object&&self,f=u||d||Function("return this")(),p=Object.prototype.toString,h=Math.max,m=Math.min,y=function(){return f.Date.now()};function v(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function g(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&p.call(t)==i}(t))return r;if(v(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=v(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var n=s.test(t);return n||l.test(t)?c(t.slice(2),n?2:8):o.test(t)?r:+t}t.exports=function(t,e,r){var i,a,o,s,l,c,u=0,d=!1,f=!1,p=!0;if("function"!=typeof t)throw new TypeError(n);function b(e){var n=i,r=a;return i=a=void 0,u=e,s=t.apply(r,n)}function w(t){var n=t-c;return void 0===c||n>=e||n<0||f&&t-u>=o}function x(){var t=y();if(w(t))return k(t);l=setTimeout(x,function(t){var n=e-(t-c);return f?m(n,o-(t-u)):n}(t))}function k(t){return l=void 0,p&&i?b(t):(i=a=void 0,s)}function S(){var t=y(),n=w(t);if(i=arguments,a=this,c=t,n){if(void 0===l)return function(t){return u=t,l=setTimeout(x,e),d?b(t):s}(c);if(f)return l=setTimeout(x,e),b(c)}return void 0===l&&(l=setTimeout(x,e)),s}return e=g(e)||0,v(r)&&(d=!!r.leading,o=(f="maxWait"in r)?h(g(r.maxWait)||0,e):o,p="trailing"in r?!!r.trailing:p),S.cancel=function(){void 0!==l&&clearTimeout(l),u=0,i=c=a=l=void 0},S.flush=function(){return void 0===l?s:k(y())},S}}).call(this,n(0))},3:function(t,e,n){var r,i,a;/*! nouislider - 12.1.0 - 10/25/2018 */i=[],void 0===(a="function"==typeof(r=function(){"use strict";var t="12.1.0";function e(t){return null!=t}function n(t){t.preventDefault()}function r(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function i(t,e,n){n>0&&(l(t,e),setTimeout(function(){c(t,e)},n))}function a(t){return Math.max(Math.min(t,100),0)}function o(t){return Array.isArray(t)?t:[t]}function s(t){var e=(t=String(t)).split(".");return e.length>1?e[1].length:0}function l(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function c(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function u(t){var e=void 0!==window.pageXOffset,n="CSS1Compat"===(t.compatMode||""),r=e?window.pageXOffset:n?t.documentElement.scrollLeft:t.body.scrollLeft,i=e?window.pageYOffset:n?t.documentElement.scrollTop:t.body.scrollTop;return{x:r,y:i}}function d(t,e){return 100/(e-t)}function f(t,e){return 100*e/(t[1]-t[0])}function p(t,e){for(var n=1;t>=e[n];)n+=1;return n}function h(t,e,n){if(n>=t.slice(-1)[0])return 100;var r=p(n,t),i=t[r-1],a=t[r],o=e[r-1],s=e[r];return o+function(t,e){return f(t,t[0]<0?e+Math.abs(t[0]):e-t[0])}([i,a],n)/d(o,s)}function m(t,e,n,r){if(100===r)return r;var i=p(r,t),a=t[i-1],o=t[i];return n?r-a>(o-a)/2?o:a:e[i-1]?t[i-1]+function(t,e){return Math.round(t/e)*e}(r-t[i-1],e[i-1]):r}function y(e,n,i){var a;if("number"==typeof n&&(n=[n]),!Array.isArray(n))throw new Error("noUiSlider ("+t+"): 'range' contains invalid value.");if(!r(a="min"===e?0:"max"===e?100:parseFloat(e))||!r(n[0]))throw new Error("noUiSlider ("+t+"): 'range' value isn't numeric.");i.xPct.push(a),i.xVal.push(n[0]),a?i.xSteps.push(!isNaN(n[1])&&n[1]):isNaN(n[1])||(i.xSteps[0]=n[1]),i.xHighestCompleteStep.push(0)}function v(t,e,n){if(!e)return!0;n.xSteps[t]=f([n.xVal[t],n.xVal[t+1]],e)/d(n.xPct[t],n.xPct[t+1]);var r=(n.xVal[t+1]-n.xVal[t])/n.xNumSteps[t],i=Math.ceil(Number(r.toFixed(3))-1),a=n.xVal[t]+n.xNumSteps[t]*i;n.xHighestCompleteStep[t]=a}function g(t,e,n){var r;this.xPct=[],this.xVal=[],this.xSteps=[n||!1],this.xNumSteps=[!1],this.xHighestCompleteStep=[],this.snap=e;var i=[];for(r in t)t.hasOwnProperty(r)&&i.push([t[r],r]);for(i.length&&"object"==typeof i[0][0]?i.sort(function(t,e){return t[0][0]-e[0][0]}):i.sort(function(t,e){return t[0]-e[0]}),r=0;r<i.length;r++)y(i[r][1],i[r][0],this);for(this.xNumSteps=this.xSteps.slice(0),r=0;r<this.xNumSteps.length;r++)v(r,this.xNumSteps[r],this)}g.prototype.getMargin=function(e){var n=this.xNumSteps[0];if(n&&e/n%1!=0)throw new Error("noUiSlider ("+t+"): 'limit', 'margin' and 'padding' must be divisible by step.");return 2===this.xPct.length&&f(this.xVal,e)},g.prototype.toStepping=function(t){return t=h(this.xVal,this.xPct,t)},g.prototype.fromStepping=function(t){return function(t,e,n){if(n>=100)return t.slice(-1)[0];var r=p(n,e),i=t[r-1],a=t[r],o=e[r-1],s=e[r];return function(t,e){return e*(t[1]-t[0])/100+t[0]}([i,a],(n-o)*d(o,s))}(this.xVal,this.xPct,t)},g.prototype.getStep=function(t){return t=m(this.xPct,this.xSteps,this.snap,t)},g.prototype.getNearbySteps=function(t){var e=p(t,this.xPct);return{stepBefore:{startValue:this.xVal[e-2],step:this.xNumSteps[e-2],highestStep:this.xHighestCompleteStep[e-2]},thisStep:{startValue:this.xVal[e-1],step:this.xNumSteps[e-1],highestStep:this.xHighestCompleteStep[e-1]},stepAfter:{startValue:this.xVal[e],step:this.xNumSteps[e],highestStep:this.xHighestCompleteStep[e]}}},g.prototype.countStepDecimals=function(){var t=this.xNumSteps.map(s);return Math.max.apply(null,t)},g.prototype.convert=function(t){return this.getStep(this.toStepping(t))};var b={to:function(t){return void 0!==t&&t.toFixed(2)},from:Number};function w(e){if(function(t){return"object"==typeof t&&"function"==typeof t.to&&"function"==typeof t.from}(e))return!0;throw new Error("noUiSlider ("+t+"): 'format' requires 'to' and 'from' methods.")}function x(e,n){if(!r(n))throw new Error("noUiSlider ("+t+"): 'step' is not numeric.");e.singleStep=n}function k(e,n){if("object"!=typeof n||Array.isArray(n))throw new Error("noUiSlider ("+t+"): 'range' is not an object.");if(void 0===n.min||void 0===n.max)throw new Error("noUiSlider ("+t+"): Missing 'min' or 'max' in 'range'.");if(n.min===n.max)throw new Error("noUiSlider ("+t+"): 'range' 'min' and 'max' cannot be equal.");e.spectrum=new g(n,e.snap,e.singleStep)}function S(e,n){if(n=o(n),!Array.isArray(n)||!n.length)throw new Error("noUiSlider ("+t+"): 'start' option is incorrect.");e.handles=n.length,e.start=n}function A(e,n){if(e.snap=n,"boolean"!=typeof n)throw new Error("noUiSlider ("+t+"): 'snap' option must be a boolean.")}function E(e,n){if(e.animate=n,"boolean"!=typeof n)throw new Error("noUiSlider ("+t+"): 'animate' option must be a boolean.")}function N(e,n){if(e.animationDuration=n,"number"!=typeof n)throw new Error("noUiSlider ("+t+"): 'animationDuration' option must be a number.")}function C(e,n){var r,i=[!1];if("lower"===n?n=[!0,!1]:"upper"===n&&(n=[!1,!0]),!0===n||!1===n){for(r=1;r<e.handles;r++)i.push(n);i.push(!1)}else{if(!Array.isArray(n)||!n.length||n.length!==e.handles+1)throw new Error("noUiSlider ("+t+"): 'connect' option doesn't match handle count.");i=n}e.connect=i}function M(e,n){switch(n){case"horizontal":e.ort=0;break;case"vertical":e.ort=1;break;default:throw new Error("noUiSlider ("+t+"): 'orientation' option is invalid.")}}function O(e,n){if(!r(n))throw new Error("noUiSlider ("+t+"): 'margin' option must be numeric.");if(0!==n&&(e.margin=e.spectrum.getMargin(n),!e.margin))throw new Error("noUiSlider ("+t+"): 'margin' option is only supported on linear sliders.")}function _(e,n){if(!r(n))throw new Error("noUiSlider ("+t+"): 'limit' option must be numeric.");if(e.limit=e.spectrum.getMargin(n),!e.limit||e.handles<2)throw new Error("noUiSlider ("+t+"): 'limit' option is only supported on linear sliders with 2 or more handles.")}function P(e,n){if(!r(n)&&!Array.isArray(n))throw new Error("noUiSlider ("+t+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(n)&&2!==n.length&&!r(n[0])&&!r(n[1]))throw new Error("noUiSlider ("+t+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(0!==n){if(Array.isArray(n)||(n=[n,n]),e.padding=[e.spectrum.getMargin(n[0]),e.spectrum.getMargin(n[1])],!1===e.padding[0]||!1===e.padding[1])throw new Error("noUiSlider ("+t+"): 'padding' option is only supported on linear sliders.");if(e.padding[0]<0||e.padding[1]<0)throw new Error("noUiSlider ("+t+"): 'padding' option must be a positive number(s).");if(e.padding[0]+e.padding[1]>=100)throw new Error("noUiSlider ("+t+"): 'padding' option must not exceed 100% of the range.")}}function T(e,n){switch(n){case"ltr":e.dir=0;break;case"rtl":e.dir=1;break;default:throw new Error("noUiSlider ("+t+"): 'direction' option was not recognized.")}}function F(e,n){if("string"!=typeof n)throw new Error("noUiSlider ("+t+"): 'behaviour' must be a string containing options.");var r=n.indexOf("tap")>=0,i=n.indexOf("drag")>=0,a=n.indexOf("fixed")>=0,o=n.indexOf("snap")>=0,s=n.indexOf("hover")>=0,l=n.indexOf("unconstrained")>=0;if(a){if(2!==e.handles)throw new Error("noUiSlider ("+t+"): 'fixed' behaviour must be used with 2 handles");O(e,e.start[1]-e.start[0])}if(l&&(e.margin||e.limit))throw new Error("noUiSlider ("+t+"): 'unconstrained' behaviour cannot be used with margin or limit");e.events={tap:r||o,drag:i,fixed:a,snap:o,hover:s,unconstrained:l}}function D(e,n){if(!1!==n)if(!0===n){e.tooltips=[];for(var r=0;r<e.handles;r++)e.tooltips.push(!0)}else{if(e.tooltips=o(n),e.tooltips.length!==e.handles)throw new Error("noUiSlider ("+t+"): must pass a formatter for all handles.");e.tooltips.forEach(function(e){if("boolean"!=typeof e&&("object"!=typeof e||"function"!=typeof e.to))throw new Error("noUiSlider ("+t+"): 'tooltips' must be passed a formatter or 'false'.")})}}function U(t,e){t.ariaFormat=e,w(e)}function L(t,e){t.format=e,w(e)}function j(e,n){if(e.keyboardSupport=n,"boolean"!=typeof n)throw new Error("noUiSlider ("+t+"): 'keyboardSupport' option must be a boolean.")}function V(t,e){t.documentElement=e}function z(e,n){if("string"!=typeof n&&!1!==n)throw new Error("noUiSlider ("+t+"): 'cssPrefix' must be a string or `false`.");e.cssPrefix=n}function B(e,n){if("object"!=typeof n)throw new Error("noUiSlider ("+t+"): 'cssClasses' must be an object.");if("string"==typeof e.cssPrefix)for(var r in e.cssClasses={},n)n.hasOwnProperty(r)&&(e.cssClasses[r]=e.cssPrefix+n[r]);else e.cssClasses=n}function H(n){var r={margin:0,limit:0,padding:0,animate:!0,animationDuration:300,ariaFormat:b,format:b},i={step:{r:!1,t:x},start:{r:!0,t:S},connect:{r:!0,t:C},direction:{r:!0,t:T},snap:{r:!1,t:A},animate:{r:!1,t:E},animationDuration:{r:!1,t:N},range:{r:!0,t:k},orientation:{r:!1,t:M},margin:{r:!1,t:O},limit:{r:!1,t:_},padding:{r:!1,t:P},behaviour:{r:!0,t:F},ariaFormat:{r:!1,t:U},format:{r:!1,t:L},tooltips:{r:!1,t:D},keyboardSupport:{r:!0,t:j},documentElement:{r:!1,t:V},cssPrefix:{r:!0,t:z},cssClasses:{r:!0,t:B}},a={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:{target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"}};n.format&&!n.ariaFormat&&(n.ariaFormat=n.format),Object.keys(i).forEach(function(o){if(!e(n[o])&&void 0===a[o]){if(i[o].r)throw new Error("noUiSlider ("+t+"): '"+o+"' is required.");return!0}i[o].t(r,e(n[o])?n[o]:a[o])}),r.pips=n.pips;var o=document.createElement("div"),s=void 0!==o.style.msTransform,l=void 0!==o.style.transform;return r.transformRule=l?"transform":s?"msTransform":"webkitTransform",r.style=[["left","top"],["right","bottom"]][r.dir][r.ort],r}function R(e,r,s){var d,f,p,h,m,y,v,g,b=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},w=window.CSS&&CSS.supports&&CSS.supports("touch-action","none"),x=w&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}(),k=e,S=[],A=[],E=0,N=r.spectrum,C=[],M={},O=e.ownerDocument,_=r.documentElement||O.documentElement,P=O.body,T=-1,F=0,D=1,U=2,L="rtl"===O.dir||1===r.ort?0:100;function j(t,e){var n=O.createElement("div");return e&&l(n,e),t.appendChild(n),n}function V(t,e){var n=j(t,r.cssClasses.origin),i=j(n,r.cssClasses.handle);return i.setAttribute("data-handle",e),r.keyboardSupport&&i.setAttribute("tabindex","0"),i.setAttribute("role","slider"),i.setAttribute("aria-orientation",r.ort?"vertical":"horizontal"),0===e?l(i,r.cssClasses.handleLower):e===r.handles-1&&l(i,r.cssClasses.handleUpper),n}function z(t,e){return!!e&&j(t,r.cssClasses.connect)}function B(t,e){return!!r.tooltips[e]&&j(t.firstChild,r.cssClasses.tooltip)}function R(t,e,n){var i=O.createElement("div"),a=[];a[F]=r.cssClasses.valueNormal,a[D]=r.cssClasses.valueLarge,a[U]=r.cssClasses.valueSub;var o=[];o[F]=r.cssClasses.markerNormal,o[D]=r.cssClasses.markerLarge,o[U]=r.cssClasses.markerSub;var s=[r.cssClasses.valueHorizontal,r.cssClasses.valueVertical],c=[r.cssClasses.markerHorizontal,r.cssClasses.markerVertical];function u(t,e){var n=e===r.cssClasses.value,i=n?s:c,l=n?a:o;return e+" "+i[r.ort]+" "+l[t]}return l(i,r.cssClasses.pips),l(i,0===r.ort?r.cssClasses.pipsHorizontal:r.cssClasses.pipsVertical),Object.keys(t).forEach(function(a){!function(t,a,o){if((o=e?e(a,o):o)!==T){var s=j(i,!1);s.className=u(o,r.cssClasses.marker),s.style[r.style]=t+"%",o>F&&((s=j(i,!1)).className=u(o,r.cssClasses.value),s.setAttribute("data-value",a),s.style[r.style]=t+"%",s.innerHTML=n.to(a))}}(a,t[a][0],t[a][1])}),i}function I(){var t;m&&((t=m).parentElement.removeChild(t),m=null)}function Y(e){I();var n=e.mode,r=e.density||1,i=e.filter||!1,a=e.values||!1,o=e.stepped||!1,s=function(e,n,r){if("range"===e||"steps"===e)return N.xVal;if("count"===e){if(n<2)throw new Error("noUiSlider ("+t+"): 'values' (>= 2) required for mode 'count'.");var i=n-1,a=100/i;for(n=[];i--;)n[i]=i*a;n.push(100),e="positions"}return"positions"===e?n.map(function(t){return N.fromStepping(r?N.getStep(t):t)}):"values"===e?r?n.map(function(t){return N.fromStepping(N.getStep(N.toStepping(t)))}):n:void 0}(n,a,o),l=function(t,e,n){var r,i={},a=N.xVal[0],o=N.xVal[N.xVal.length-1],s=!1,l=!1,c=0;return(r=n.slice().sort(function(t,e){return t-e}),n=r.filter(function(t){return!this[t]&&(this[t]=!0)},{}))[0]!==a&&(n.unshift(a),s=!0),n[n.length-1]!==o&&(n.push(o),l=!0),n.forEach(function(r,a){var o,u,d,f,p,h,m,y,v,g,b=r,w=n[a+1],x="steps"===e;if(x&&(o=N.xNumSteps[a]),o||(o=w-b),!1!==b&&void 0!==w)for(o=Math.max(o,1e-7),u=b;u<=w;u=(u+o).toFixed(7)/1){for(y=(p=(f=N.toStepping(u))-c)/t,g=p/(v=Math.round(y)),d=1;d<=v;d+=1)i[(h=c+d*g).toFixed(5)]=[N.fromStepping(h),0];m=n.indexOf(u)>-1?D:x?U:F,!a&&s&&(m=0),u===w&&l||(i[f.toFixed(5)]=[u,m]),c=f}}),i}(r,n,s),c=e.format||{to:Math.round};return m=k.appendChild(R(l,i,c))}function q(){var t=d.getBoundingClientRect(),e="offset"+["Width","Height"][r.ort];return 0===r.ort?t.width||d[e]:t.height||d[e]}function G(t,e,n,i){var a=function(a){return!!(a=function(t,e,n){var r,i,a=0===t.type.indexOf("touch"),o=0===t.type.indexOf("mouse"),s=0===t.type.indexOf("pointer");if(0===t.type.indexOf("MSPointer")&&(s=!0),a){var l=function(t){return t.target===n||n.contains(t.target)};if("touchstart"===t.type){var c=Array.prototype.filter.call(t.touches,l);if(c.length>1)return!1;r=c[0].pageX,i=c[0].pageY}else{var d=Array.prototype.find.call(t.changedTouches,l);if(!d)return!1;r=d.pageX,i=d.pageY}}return e=e||u(O),(o||s)&&(r=t.clientX+e.x,i=t.clientY+e.y),t.pageOffset=e,t.points=[r,i],t.cursor=o||s,t}(a,i.pageOffset,i.target||e))&&!(k.hasAttribute("disabled")&&!i.doNotReject)&&(o=k,s=r.cssClasses.tap,!((o.classList?o.classList.contains(s):new RegExp("\\b"+s+"\\b").test(o.className))&&!i.doNotReject)&&!(t===b.start&&void 0!==a.buttons&&a.buttons>1)&&(!i.hover||!a.buttons)&&(x||a.preventDefault(),a.calcPoint=a.points[r.ort],void n(a,i)));var o,s},o=[];return t.split(" ").forEach(function(t){e.addEventListener(t,a,!!x&&{passive:!0}),o.push([t,a])}),o}function X(t){var e,n,i,o,s,l,c=t-(e=d,n=r.ort,i=e.getBoundingClientRect(),o=e.ownerDocument,s=o.documentElement,l=u(o),/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(l.x=0),n?i.top+l.y-s.clientTop:i.left+l.x-s.clientLeft),f=100*c/q();return f=a(f),r.dir?100-f:f}function W(t,e){"mouseout"===t.type&&"HTML"===t.target.nodeName&&null===t.relatedTarget&&J(t,e)}function $(t,e){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===t.buttons&&0!==e.buttonsProperty)return J(t,e);var n=(r.dir?-1:1)*(t.calcPoint-e.startCalcPoint),i=100*n/e.baseSize;at(n>0,i,e.locations,e.handleNumbers)}function J(t,e){e.handle&&(c(e.handle,r.cssClasses.active),E-=1),e.listeners.forEach(function(t){_.removeEventListener(t[0],t[1])}),0===E&&(c(k,r.cssClasses.drag),st(),t.cursor&&(P.style.cursor="",P.removeEventListener("selectstart",n))),e.handleNumbers.forEach(function(t){et("change",t),et("set",t),et("end",t)})}function K(t,e){var i;if(1===e.handleNumbers.length){var a=f[e.handleNumbers[0]];if(a.hasAttribute("disabled"))return!1;i=a.children[0],E+=1,l(i,r.cssClasses.active)}t.stopPropagation();var o=[],s=G(b.move,_,$,{target:t.target,handle:i,listeners:o,startCalcPoint:t.calcPoint,baseSize:q(),pageOffset:t.pageOffset,handleNumbers:e.handleNumbers,buttonsProperty:t.buttons,locations:S.slice()}),c=G(b.end,_,J,{target:t.target,handle:i,listeners:o,doNotReject:!0,handleNumbers:e.handleNumbers}),u=G("mouseout",_,W,{target:t.target,handle:i,listeners:o,doNotReject:!0,handleNumbers:e.handleNumbers});o.push.apply(o,s.concat(c,u)),t.cursor&&(P.style.cursor=getComputedStyle(t.target).cursor,f.length>1&&l(k,r.cssClasses.drag),P.addEventListener("selectstart",n,!1)),e.handleNumbers.forEach(function(t){et("start",t)})}function Q(t){t.stopPropagation();var e=X(t.calcPoint),n=function(t){var e=100,n=!1;return f.forEach(function(r,i){if(!r.hasAttribute("disabled")){var a=Math.abs(S[i]-t);(a<e||100===a&&100===e)&&(n=i,e=a)}}),n}(e);if(!1===n)return!1;r.events.snap||i(k,r.cssClasses.tap,r.animationDuration),lt(n,e,!0,!0),st(),et("slide",n,!0),et("update",n,!0),et("change",n,!0),et("set",n,!0),r.events.snap&&K(t,{handleNumbers:[n]})}function Z(t){var e=X(t.calcPoint),n=N.getStep(e),r=N.fromStepping(n);Object.keys(M).forEach(function(t){"hover"===t.split(".")[0]&&M[t].forEach(function(t){t.call(h,r)})})}function tt(t,e){M[t]=M[t]||[],M[t].push(e),"update"===t.split(".")[0]&&f.forEach(function(t,e){et("update",e)})}function et(t,e,n){Object.keys(M).forEach(function(i){var a=i.split(".")[0];t===a&&M[i].forEach(function(t){t.call(h,C.map(r.format.to),e,C.slice(),n||!1,S.slice())})})}function nt(t){return t+"%"}function rt(t,e,n,i,o,s){return f.length>1&&!r.events.unconstrained&&(i&&e>0&&(n=Math.max(n,t[e-1]+r.margin)),o&&e<f.length-1&&(n=Math.min(n,t[e+1]-r.margin))),f.length>1&&r.limit&&(i&&e>0&&(n=Math.min(n,t[e-1]+r.limit)),o&&e<f.length-1&&(n=Math.max(n,t[e+1]-r.limit))),r.padding&&(0===e&&(n=Math.max(n,r.padding[0])),e===f.length-1&&(n=Math.min(n,100-r.padding[1]))),!((n=a(n=N.getStep(n)))===t[e]&&!s)&&n}function it(t,e){var n=r.ort;return(n?e:t)+", "+(n?t:e)}function at(t,e,n,r){var i=n.slice(),a=[!t,t],o=[t,!t];r=r.slice(),t&&r.reverse(),r.length>1?r.forEach(function(t,n){var r=rt(i,t,i[t]+e,a[n],o[n],!1);!1===r?e=0:(e=r-i[t],i[t]=r)}):a=o=[!0];var s=!1;r.forEach(function(t,r){s=lt(t,n[t]+e,a[r],o[r])||s}),s&&r.forEach(function(t){et("update",t),et("slide",t)})}function ot(t,e){return r.dir?100-t-e:t}function st(){A.forEach(function(t){var e=S[t]>50?-1:1,n=3+(f.length+e*t);f[t].style.zIndex=n})}function lt(t,e,n,i){return!1!==(e=rt(S,t,e,n,i,!1))&&(function(t,e){S[t]=e,C[t]=N.fromStepping(e);var n="translate("+it(nt(ot(e,0)-L),"0")+")";f[t].style[r.transformRule]=n,ct(t),ct(t+1)}(t,e),!0)}function ct(t){if(p[t]){var e=0,n=100;0!==t&&(e=S[t-1]),t!==p.length-1&&(n=S[t]);var i=n-e,a="translate("+it(nt(ot(e,i)),"0")+")",o="scale("+it(i/100,"1")+")";p[t].style[r.transformRule]=a+" "+o}}function ut(t,e){var n=o(t),a=void 0===S[0];e=void 0===e||!!e,r.animate&&!a&&i(k,r.cssClasses.tap,r.animationDuration),A.forEach(function(t){lt(t,function(t,e){return null===t||!1===t||void 0===t?S[e]:("number"==typeof t&&(t=String(t)),t=r.format.from(t),!1===(t=N.toStepping(t))||isNaN(t)?S[e]:t)}(n[t],t),!0,!1)}),A.forEach(function(t){lt(t,S[t],!0,!0)}),st(),A.forEach(function(t){et("update",t),null!==n[t]&&e&&et("set",t)})}function dt(){var t=C.map(r.format.to);return 1===t.length?t[0]:t}return l(g=k,r.cssClasses.target),0===r.dir?l(g,r.cssClasses.ltr):l(g,r.cssClasses.rtl),0===r.ort?l(g,r.cssClasses.horizontal):l(g,r.cssClasses.vertical),d=j(g,r.cssClasses.base),function(t,e){var n=j(e,r.cssClasses.connects);f=[],(p=[]).push(z(n,t[0]));for(var i=0;i<r.handles;i++)f.push(V(e,i)),A[i]=i,p.push(z(n,t[i+1]))}(r.connect,d),(v=r.events).fixed||f.forEach(function(t,e){G(b.start,t.children[0],K,{handleNumbers:[e]})}),v.tap&&G(b.start,d,Q,{}),v.hover&&G(b.move,d,Z,{hover:!0}),v.drag&&p.forEach(function(t,e){if(!1!==t&&0!==e&&e!==p.length-1){var n=f[e-1],i=f[e],a=[t];l(t,r.cssClasses.draggable),v.fixed&&(a.push(n.children[0]),a.push(i.children[0])),a.forEach(function(t){G(b.start,t,K,{handles:[n,i],handleNumbers:[e-1,e]})})}}),ut(r.start),h={destroy:function(){for(var t in r.cssClasses)r.cssClasses.hasOwnProperty(t)&&c(k,r.cssClasses[t]);for(;k.firstChild;)k.removeChild(k.firstChild);delete k.noUiSlider},steps:function(){return S.map(function(t,e){var n=N.getNearbySteps(t),r=C[e],i=n.thisStep.step,a=null;!1!==i&&r+i>n.stepAfter.startValue&&(i=n.stepAfter.startValue-r),a=r>n.thisStep.startValue?n.thisStep.step:!1!==n.stepBefore.step&&r-n.stepBefore.highestStep,100===t?i=null:0===t&&(a=null);var o=N.countStepDecimals();return null!==i&&!1!==i&&(i=Number(i.toFixed(o))),null!==a&&!1!==a&&(a=Number(a.toFixed(o))),[a,i]})},on:tt,off:function(t){var e=t&&t.split(".")[0],n=e&&t.substring(e.length);Object.keys(M).forEach(function(t){var r=t.split(".")[0],i=t.substring(r.length);e&&e!==r||n&&n!==i||delete M[t]})},get:dt,set:ut,setHandle:function(e,n,r){var i=[];if(!((e=Number(e))>=0&&e<A.length))throw new Error("noUiSlider ("+t+"): invalid handle number, got: "+e);for(var a=0;a<A.length;a++)i[a]=null;i[e]=n,ut(i,r)},reset:function(t){ut(r.start,t)},__moveHandles:function(t,e,n){at(t,e,S,n)},options:s,updateOptions:function(t,e){var n=dt(),i=["margin","limit","padding","range","animate","snap","step","format"];i.forEach(function(e){void 0!==t[e]&&(s[e]=t[e])});var a=H(s);i.forEach(function(e){void 0!==t[e]&&(r[e]=a[e])}),N=a.spectrum,r.margin=a.margin,r.limit=a.limit,r.padding=a.padding,r.pips&&Y(r.pips),S=[],ut(t.start||n,e)},target:k,removePips:I,pips:Y},r.pips&&Y(r.pips),r.tooltips&&(y=f.map(B),tt("update",function(t,e,n){if(y[e]){var i=t[e];!0!==r.tooltips[e]&&(i=r.tooltips[e].to(n[e])),y[e].innerHTML=i}})),tt("update",function(t,e,n,i,a){A.forEach(function(t){var e=f[t],i=rt(S,t,0,!0,!0,!0),o=rt(S,t,100,!0,!0,!0),s=a[t],l=r.ariaFormat.to(n[t]);i=N.fromStepping(i).toFixed(1),o=N.fromStepping(o).toFixed(1),s=N.fromStepping(s).toFixed(1),e.children[0].setAttribute("aria-valuemin",i),e.children[0].setAttribute("aria-valuemax",o),e.children[0].setAttribute("aria-valuenow",s),e.children[0].setAttribute("aria-valuetext",l)})}),h}return{__spectrum:g,version:t,create:function(e,n){if(!e||!e.nodeName)throw new Error("noUiSlider ("+t+"): create requires a single element, got: "+e);if(e.noUiSlider)throw new Error("noUiSlider ("+t+"): Slider was already initialized.");var r=H(n),i=R(e,r,n);return e.noUiSlider=i,i}}})?r.apply(e,i):r)||(t.exports=a)}});